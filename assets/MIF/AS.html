<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alike Mission Module | EYC</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --gold: #ffcc00; 
            --glass: rgba(255, 255, 255, 0.03); 
            --gold-border: rgba(212, 175, 55, 0.3);
        }
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background: transparent; /* عشان يظهر خلفية الأرينا */
            color: white; 
            margin: 0; 
            padding: 10px; 
            overflow-x: hidden;
        }

        /* تحسين السكرول بار ليناسب شكل الأرينا */
        body::-webkit-scrollbar { width: 5px; }
        body::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }

        .mission-container { animation: fadeIn 0.5s ease; padding-bottom: 20px; }

        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .alike-grid {
            display: grid; 
            grid-template-columns: 1fr; 
            gap: 20px; 
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        /* جعل الكروت صفين في الشاشات الواسعة داخل الفرايم */
        @media (min-width: 600px) {
            .alike-grid { grid-template-columns: 1fr 1fr; }
        }

        .pair-card {
            background: var(--glass); 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 15px;
            padding: 20px 15px 15px; 
            position: relative;
            transition: 0.3s;
        }
        
        .pair-card:hover { border-color: var(--gold); }

        .case-tag {
            position: absolute; top: -10px; right: 15px; 
            background: var(--gold);
            color: black; 
            font-family: 'Orbitron'; 
            font-size: 10px; 
            padding: 2px 10px; 
            border-radius: 10px; 
            font-weight: bold;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .word-box { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        label { font-size: 13px; color: #bbb; font-weight: bold; }

        input {
            width: 100%; 
            background: rgba(0,0,0,0.6); 
            border: 1px solid var(--gold-border);
            border-radius: 8px; 
            padding: 12px 5px; 
            color: var(--gold); 
            text-align: center;
            font-family: 'Orbitron'; 
            font-size: 15px; 
            outline: none; 
            transition: 0.3s;
        }

        input:focus { border-color: var(--gold); background: rgba(0,0,0,0.8); }
        input.error { border-color: #ff4444 !important; box-shadow: 0 0 5px #ff4444; }
    </style>
</head>
<body>

    <div id="mission-wrapper"></div>

<script>
    const missionsData = {
        "1": [ {a:"شمس", b:"ابن"}, {a:"بحر", b:"يرى"}, {a:"إلى", b:"أيضاً"}, {a:"هنا", b:"يسمع"}, {a:"لا", b:"يعرف"} ], 
        "2": [ {a:"أسبوع", b:"ضعيف"}, {a:"طريق", b:"وزن"}, {a:"ساعة", b:"لنا"}, {a:"اشترى", b:"بواسطة"}, {a:"لحم", b:"يقابل"} ], 
        "3": [ {a:"جديد", b:"عرف"}, {a:"حق", b:"يكتب"}, {a:"ثمانية", b:"أكل"}, {a:"كامل", b:"ثقب"}, {a:"صلاة", b:"فريسة"} ], 
        "4": [ {a:"قطعة", b:"سلام"}, {a:"وردة", b:"دقيق"}, {a:"قصة", b:"ذيل"}, {a:"شعر", b:"أرنب"}, {a:"شمس", b:"ابن"} ], 
        "5": [ {a:"أين", b:"يرتدي"}, {a:"واحد", b:"فاز"}, {a:"ابن", b:"شمس"}, {a:"أزرق", b:"نفخ"}, {a:"بريد", b:"ذكر"} ],
        "6": [ {a:"ليل", b:"فارس"}, {a:"خشب", b:"سوف"}, {a:"سمح", b:"بصوت عال"}, {a:"أحمر", b:"قرأ"}, {a:"مشهد", b:"رأى"} ],
        "7": [ {a:"الطقس", b:"سواء"}, {a:"فارغ", b:"درس"}, {a:"نظام", b:"جذر"}, {a:"عارية", b:"دب"}, {a:"تحديق", b:"درج"} ],
        "8": [ {a:"رئيسي", b:"عرف الحصان"}, {a:"مملح", b:"حبوب"}, {a:"لوح", b:"ملل"}, {a:"مركب", b:"إناء"}, {a:"تأثير", b:"يؤثر"} ],
        "9": [ {a:"موقع", b Sight:"بصر"}, {a:"قرض", b:"وحيد"}, {a:"مسموح", b:"بصوت عال"}, {a:"توجيه", b:"يكتب"}, {a:"رصيف", b:"مفتاح"} ],
        "10": [ {a:"مجلس", b:"نصيحة"}, {a:"مجاني", b:"تكملة"}, {a:"ثابت", b:"ورق"}, {a:"بحر", b:"يرى"}, {a:"معدن", b:"شجاعة"} ]
    };

    function renderActiveMission() {
        const urlParams = new URLSearchParams(window.location.search);
        // الأرينا تبعث المتغير باسم task
        const taskNum = urlParams.get('task') || "1"; 
        
        const pairs = missionsData[taskNum] || missionsData["1"];
        
        const wrapper = document.getElementById('mission-wrapper');
        wrapper.innerHTML = `
            <div class="mission-container">
                <div class="alike-grid">
                    ${pairs.map((p, i) => `
                        <div class="pair-card">
                            <span class="case-tag">CASE 0${i+1}</span>
                            <div class="input-row">
                                <div class="word-box">
                                    <label>${p.a}</label>
                                    <input type="text" class="alike-input" placeholder="...">
                                </div>
                                <div class="word-box">
                                    <label>${p.b}</label>
                                    <input type="text" class="alike-input" placeholder="...">
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    // استقبال النداء من زرار Submit اللي في الأرينا
    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_MISSION_DATA') {
            collectAndSend();
        }
    });

    function collectAndSend() {
        const inputs = document.querySelectorAll('.alike-input');
        let answers = [];
        let hasError = false;

        inputs.forEach(input => {
            const val = input.value.trim();
            if(!val) {
                hasError = true;
                input.classList.add('error');
            } else {
                input.classList.remove('error');
                answers.push(val.toLowerCase());
            }
        });

        if(hasError) {
            // إرسال تنبيه بسيط للأرينا أو عرضه هنا
            alert("⚠️ فضلاً يا بطل، أكمل جميع الحقول المطلوبة!");
            // نبعث للأرينا إننا لسه مخلصناش عشان تخفي الـ Loading
            window.parent.postMessage({ type: 'MISSION_INCOMPLETE' }, '*');
            return;
        }

        // إرسال البيانات النهائية للأرينا
        window.parent.postMessage({
            type: 'MISSION_ANSWERS', 
            answers: answers.join(', ') // تحويل المصفوفة لنص لسهولة المعالجة
        }, '*');
    }

    window.onload = renderActiveMission;
</script>
</body>
</html>