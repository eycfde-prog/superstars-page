<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Label X | Grammar Radar | EYC</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-purple: #bc13fe;
            --dark-glass: rgba(10, 10, 15, 0.9);
        }

        body { 
            font-family: 'Rajdhani', sans-serif; 
            background: transparent; color: #fff; 
            margin: 0; padding: 20px; direction: ltr;
        }

        .header-x {
            text-align: center; margin-bottom: 30px;
            border-bottom: 1px solid rgba(188, 19, 254, 0.3);
            padding-bottom: 15px;
        }

        .header-x h1 {
            font-family: 'Orbitron'; font-size: 1.5rem;
            color: var(--neon-purple); letter-spacing: 5px; margin: 0;
        }

        .label-x-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .grammar-card {
            background: var(--dark-glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--neon-purple);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            transition: 0.3s;
        }

        .grammar-card:hover {
            box-shadow: 0 0 20px rgba(188, 19, 254, 0.2);
            transform: scale(1.02);
        }

        .case-id {
            position: absolute; top: 5px; right: 10px;
            font-family: 'Orbitron'; font-size: 10px; color: #555;
        }

        .grammar-formula {
            font-family: 'Orbitron';
            font-size: 0.85rem;
            color: var(--neon-blue);
            margin-bottom: 15px;
            line-height: 1.4;
            min-height: 40px;
            display: flex; align-items: center;
        }

        .x-input {
            width: 100%;
            background: rgba(0,0,0,0.5);
            border: 1px solid #333;
            border-radius: 4px;
            color: #fff;
            padding: 10px;
            font-family: 'Rajdhani';
            font-size: 1.1rem;
            outline: none;
            transition: 0.3s;
            box-sizing: border-box;
        }

        .x-input:focus {
            border-color: var(--neon-blue);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
        }
    </style>
</head>
<body>

    <div class="header-x">
        <h1 id="level-display">GRAMMAR RADAR: LEVEL 01</h1>
        <p style="font-size: 12px; color: #888;">IDENTIFY THE STRUCTURE AND PROVIDE A CORRECT EXAMPLE</p>
    </div>

    <div id="radar-screen" class="label-x-grid"></div>

<script>
    const labelXData = {
        "1": ["Present Simple (Positive)", "Present Simple (Negative)", "Present Simple (Question)", "Past Simple (Positive)", "Past Simple (Negative)", "Past Simple (Question)", "Subject Pronouns", "Object Pronouns", "Possessive Adjectives", "Possessive Pronouns"],
        "2": ["Present Continuous (Positive)", "Present Continuous (Negative)", "Present Continuous (Question)", "Past Continuous (Positive)", "Past Continuous (Negative)", "Past Continuous (Question)", "Present Simple vs Continuous", "Stative Verbs (Usage)", "Spelling rules for -ing", "Time markers for Continuous"],
        "3": ["Future Simple (Will - Positive)", "Future Simple (Will - Negative)", "Future Simple (Will - Question)", "Future (Going to - Positive)", "Future (Going to - Question)", "Can / Can't (Ability)", "Must / Mustn't (Obligation)", "Should / Shouldn't (Advice)", "Have to (Positive)", "Don't have to (Lack of necessity)"],
        "4": ["Present Perfect Simple (Positive)", "Present Perfect Simple (Negative)", "Present Perfect Simple (Question)", "Ever / Never (Usage)", "Just / Already / Yet", "Since vs For", "Present Perfect vs Past Simple", "Been vs Gone", "Have you ever...?", "Past Perfect (Positive)"],
        "5": ["Present Simple (Passive Positive)", "Present Simple (Passive Negative)", "Present Simple (Passive Question)", "Past Simple (Passive Positive)", "Past Simple (Passive Negative)", "Past Simple (Passive Question)", "By + Agent in Passive", "Passive with two objects", "Passive (It is said that...)", "Active to Passive Conversion"],
        "6": ["Present Perfect Continuous (Positive)", "Present Perfect Continuous (Question)", "Past Perfect Continuous (Positive)", "Past Perfect Continuous (Negative)", "Future Continuous (Positive)", "Future Perfect (Positive)", "State vs Action Verbs in Continuous", "Emphasis on duration (For/Since)", "Mixed Continuous Tenses", "Narrative Tenses"],
        "7": ["Present Continuous (Passive)", "Past Continuous (Passive)", "Present Perfect Simple (Passive Positive)", "Present Perfect Simple (Passive Negative)", "Past Perfect Simple (Passive)", "Future Simple (Passive)", "Going to (Passive)", "Modals in Passive (Can be + P.P)", "Passive Voice (Question Forms)", "Passive with Verbs like 'Believe/Think'"],
        "8": ["May / Might (Possibility)", "Could / Should (Perfect Modals)", "Must have + P.P (Certainty)", "Can't have + P.P (Impossibility)", "Should have + P.P (Regret)", "Needn't vs Don't have to", "Passive Modals (Question)", "Passive with Gerunds", "Passive with Infinitives", "Reporting Passive"],
        "9": ["Zero Conditional (If/When)", "First Conditional (Real Possibility)", "Second Conditional (Hypothetical)", "Third Conditional (Regret in Past)", "Unless in Conditionals", "Provided that / As long as", "Mixed Conditionals (Type 2 + 3)", "Mixed Conditionals (Type 3 + 2)", "I wish / If only (Present)", "I wish / If only (Past)"],
        "10": ["Future Perfect Passive", "Modals in Passive (Negative Question)", "Passive with Causative (Have/Get something done)", "Advanced Relative Clauses", "Inversion with Negative Adverbs", "Subjunctive Mood (I suggest that...)", "Gerund vs Infinitive (Passive)", "Future in the Past", "Participle Clauses", "Complex Passive (Modals + Perfect)"]
    };

    const urlParams = new URLSearchParams(window.location.search);
    const taskNum = urlParams.get('task') || "1";

    function loadRadar() {
        const cases = labelXData[taskNum] || labelXData["1"];
        document.getElementById('level-display').innerText = `GRAMMAR RADAR: LEVEL ${taskNum.padStart(2, '0')}`;
        
        const screen = document.getElementById('radar-screen');
        screen.innerHTML = cases.map((c, i) => `
            <div class="grammar-card">
                <span class="case-id">ID: LX-${taskNum}.${i+1}</span>
                <div class="grammar-formula">${c}</div>
                <input type="text" class="x-input" id="case-${i}" placeholder="Input correct example...">
            </div>
        `).join('');
    }

    // استماع لطلب البيانات من صفحة HybirdX
    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_LABELX_DATA') {
            const data = [];
            for(let i=0; i<10; i++) {
                data.push({
                    answer: document.getElementById(`case-${i}`).value.trim()
                });
            }

            // إرسال البيانات للصفحة الأم بالتعديل الجديد "SUBMIT_X"
            window.parent.postMessage({ 
                type: 'SUBMIT_X', 
                answers: data.map(d => d.answer), 
                missionNum: taskNum 
            }, '*');
        }
    });

    window.onload = loadRadar;
</script>
</body>
</html>