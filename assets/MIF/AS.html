<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Alike Mission Module | EYC</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffcc00; --glass: rgba(255, 255, 255, 0.03); }
        body { 
            font-family: 'Cairo', sans-serif; background: transparent; color: white; 
            margin: 0; padding: 15px; overflow-x: hidden;
        }

        .mission-container { display: none; animation: fadeIn 0.5s ease; }
        .mission-container.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .alike-grid {
            display: grid; grid-template-columns: 1fr; gap: 15px; width: 100%;
        }

        .pair-card {
            background: var(--glass); backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 15px;
            padding: 15px; position: relative;
        }

        .case-tag {
            position: absolute; top: -10px; right: 15px; background: var(--gold);
            color: black; font-family: 'Orbitron'; font-size: 10px; 
            padding: 2px 10px; border-radius: 10px; font-weight: bold;
        }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .word-box { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        label { font-size: 14px; color: #ddd; font-weight: bold; }

        input {
            width: 100%; background: rgba(0,0,0,0.5); border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px; padding: 10px; color: var(--gold); text-align: center;
            font-family: 'Orbitron'; font-size: 16px; outline: none; transition: 0.3s;
        }

        input:focus { border-color: var(--gold); box-shadow: 0 0 10px rgba(212, 175, 55, 0.2); }
    </style>
</head>
<body>

    <div id="mission-wrapper"></div>

<script>
    const missionsData = {
        "1": [ {a:"Ø´Ù…Ø³", b:"Ø§Ø¨Ù†"}, {a:"Ø¨Ø­Ø±", b:"ÙŠØ±Ù‰"}, {a:"Ø¥Ù„Ù‰", b:"Ø£ÙŠØ¶Ø§Ù‹"}, {a:"Ù‡Ù†Ø§", b:"ÙŠØ³Ù…Ø¹"}, {a:"Ù„Ø§", b:"ÙŠØ¹Ø±Ù"} ], 
        "2": [ {a:"Ø£Ø³Ø¨ÙˆØ¹", b:"Ø¶Ø¹ÙŠÙ"}, {a:"Ø·Ø±ÙŠÙ‚", b:"ÙˆØ²Ù†"}, {a:"Ø³Ø§Ø¹Ø©", b:"Ù„Ù†Ø§"}, {a:"Ø§Ø´ØªØ±Ù‰", b:"Ø¨ÙˆØ§Ø³Ø·Ø©"}, {a:"Ù„Ø­Ù…", b:"ÙŠÙ‚Ø§Ø¨Ù„"} ], 
        "3": [ {a:"Ø¬Ø¯ÙŠØ¯", b:"Ø¹Ø±Ù"}, {a:"Ø­Ù‚", b:"ÙŠÙƒØªØ¨"}, {a:"Ø«Ù…Ø§Ù†ÙŠØ©", b:"Ø£ÙƒÙ„"}, {a:"ÙƒØ§Ù…Ù„", b:"Ø«Ù‚Ø¨"}, {a:"ØµÙ„Ø§Ø©", b:"ÙØ±ÙŠØ³Ø©"} ], 
        "4": [ {a:"Ù‚Ø·Ø¹Ø©", b:"Ø³Ù„Ø§Ù…"}, {a:"ÙˆØ±Ø¯Ø©", b:"Ø¯Ù‚ÙŠÙ‚"}, {a:"Ù‚ØµØ©", b:"Ø°ÙŠÙ„"}, {a:"Ø´Ø¹Ø±", b:"Ø£Ø±Ù†Ø¨"}, {a:"Ø´Ù…Ø³", b:"Ø§Ø¨Ù†"} ], 
        "5": [ {a:"Ø£ÙŠÙ†", b:"ÙŠØ±ØªØ¯ÙŠ"}, {a:"ÙˆØ§Ø­Ø¯", b:"ÙØ§Ø²"}, {a:"Ø§Ø¨Ù†", b:"Ø´Ù…Ø³"}, {a:"Ø£Ø²Ø±Ù‚", b:"Ù†ÙØ®"}, {a:"Ø¨Ø±ÙŠØ¯", b:"Ø°ÙƒØ±"} ],
        "6": [ {a:"Ù„ÙŠÙ„", b:"ÙØ§Ø±Ø³"}, {a:"Ø®Ø´Ø¨", b:"Ø³ÙˆÙ"}, {a:"Ø³Ù…Ø­", b:"Ø¨ØµÙˆØª Ø¹Ø§Ù„"}, {a:"Ø£Ø­Ù…Ø±", b:"Ù‚Ø±Ø£"}, {a:"Ù…Ø´Ù‡Ø¯", b:"Ø±Ø£Ù‰"} ],
        "7": [ {a:"Ø§Ù„Ø·Ù‚Ø³", b:"Ø³ÙˆØ§Ø¡"}, {a:"ÙØ§Ø±Øº", b:"Ø¯Ø±Ø³"}, {a:"Ù†Ø¸Ø§Ù…", b:"Ø¬Ø°Ø±"}, {a:"Ø¹Ø§Ø±ÙŠØ©", b:"Ø¯Ø¨"}, {a:"ØªØ­Ø¯ÙŠÙ‚", b:"Ø¯Ø±Ø¬"} ],
        "8": [ {a:"Ø±Ø¦ÙŠØ³ÙŠ", b:"Ø¹Ø±Ù Ø§Ù„Ø­ØµØ§Ù†"}, {a:"Ù…Ù…Ù„Ø­", b:"Ø­Ø¨ÙˆØ¨"}, {a:"Ù„ÙˆØ­", b:"Ù…Ù„Ù„"}, {a:"Ù…Ø±ÙƒØ¨", b:"Ø¥Ù†Ø§Ø¡"}, {a:"ØªØ£Ø«ÙŠØ±", b:"ÙŠØ¤Ø«Ø±"} ],
        "9": [ {a:"Ù…ÙˆÙ‚Ø¹", b:"Ø¨ØµØ±"}, {a:"Ù‚Ø±Ø¶", b:"ÙˆØ­ÙŠØ¯"}, {a:"Ù…Ø³Ù…ÙˆØ­", b:"Ø¨ØµÙˆØª Ø¹Ø§Ù„"}, {a:"ØªÙˆØ¬ÙŠÙ‡", b:"ÙŠÙƒØªØ¨"}, {a:"Ø±ØµÙŠÙ", b:"Ù…ÙØªØ§Ø­"} ],
        "10": [ {a:"Ù…Ø¬Ù„Ø³", b:"Ù†ØµÙŠØ­Ø©"}, {a:"Ù…Ø¬Ø§Ù†ÙŠ", b:"ØªÙƒÙ…Ù„Ø©"}, {a:"Ø«Ø§Ø¨Øª", b:"ÙˆØ±Ù‚"}, {a:"Ø¨Ø­Ø±", b:"ÙŠØ±Ù‰"}, {a:"Ù…Ø¹Ø¯Ù†", b:"Ø´Ø¬Ø§Ø¹Ø©"} ]
    };

    function renderActiveMission() {
    const urlParams = new URLSearchParams(window.location.search);
    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…Ù…Ø±Ø± Ù…Ù† Ø§Ù„Ø£Ø±ÙŠÙ†Ø§
    const taskNum = urlParams.get('taskNum') || "1"; 
    
    const pairs = missionsData[taskNum] || missionsData["1"];
    
    const wrapper = document.getElementById('mission-wrapper');
    wrapper.innerHTML = `
        <div class="mission-container active">
            <div class="alike-grid">
                ${pairs.map((p, i) => `
                    <div class="pair-card">
                        <span class="case-tag">CASE 0${i+1}</span>
                        <div class="input-row">
                            <div class="word-box">
                                <label>${p.a}</label>
                                <input type="text" class="alike-input" placeholder="English...">
                            </div>
                            <div class="word-box">
                                <label>${p.b}</label>
                                <input type="text" class="alike-input" placeholder="English...">
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}
    // âš¡ï¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ: Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø£Ø±ÙŠÙ†Ø§
    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_MISSION_DATA' || event.data.type === 'REQUEST_AL_DATA') {
            collectAndSend();
        }
    });

   function collectAndSend() {
    const inputs = document.querySelectorAll('.alike-input');
    let answers = [];
    let missing = false;

    inputs.forEach(input => {
        if(!input.value.trim()) {
            missing = true;
            input.style.borderColor = "red";
        } else {
            input.style.borderColor = "rgba(212, 175, 55, 0.3)";
            answers.push(input.value.trim().toLowerCase());
        }
    });

    if(missing) {
        alert("ÙŠØ§ Ø¨Ø·Ù„ØŒ ÙƒÙ…Ù„ ÙƒÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø£ÙˆÙ„! ğŸ§");
        return;
    }

    // ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ type Ù„ÙŠØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù€ Arena
    window.parent.postMessage({
        type: 'MISSION_ANSWERS', 
        answers: answers
    }, '*');
}

    window.onload = renderActiveMission;
</script>
</body>
</html>
