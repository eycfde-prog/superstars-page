<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miss Dina Heroes</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        /* (نفس تنسيقات الـ CSS الأصلية الخاصة بكِ بدون تغيير) */
        :root { --primary-orange: #FFCC80; --deep-orange: #FF8A65; --accent-pink: #FF4081; --text-blue: #3F51B5; }
        body { margin: 0; padding: 0; background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%); min-height: 100vh; font-family: 'Fredoka One', cursive; text-align: center; color: var(--text-blue); overflow-x: hidden; position: relative; }
        .balloon-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 0; }
        .balloon { position: absolute; bottom: -150px; width: 80px; height: 100px; background-color: rgba(var(--balloon-color-rgb), 0.7); border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; box-shadow: inset -10px -10px 0 rgba(0,0,0,0.1); animation: floatUp var(--float-duration) ease-in forwards; opacity: 0; }
        @keyframes floatUp { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(-120vh) scale(1.2); opacity: 0; } }
        header { padding: 20px; z-index: 1; position: relative; }
        .logo { width: 120px; animation: bounce 2s infinite ease-in-out; display: inline-block; }
        h1 { font-size: 3.8rem; color: #E64A19; text-shadow: 4px 4px #FFF; margin: 15px 0; }
        h2 { font-size: 2.2rem; color: #1976D2; text-shadow: 2px 2px #FFF; }
        h3 { font-size: 1.8rem; color: #FFF; background: var(--deep-orange); display: inline-block; padding: 8px 30px; border-radius: 50px; margin-top: 10px; }
        
        /* القسم الخاص بكل طالب */
        .student-card { margin-bottom: 100px; position: relative; z-index: 1; }
        
        .hero-container { position: relative; width: 420px; height: 420px; margin: 40px auto; display: flex; justify-content: center; align-items: center; }
        .outer-frame { position: absolute; width: 100%; height: 100%; border: 12px dotted var(--accent-pink); border-radius: 50%; animation: rotate 25s linear infinite; }
        .student-img { width: 210px; height: 210px; border-radius: 50%; background: #fff; border: 8px solid #FFF; z-index: 2; object-fit: cover; box-shadow: 0 0 20px rgba(0,0,0,0.2); }
        .sticker { position: absolute; width: 65px; height: 65px; z-index: 3; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); display: none; }
        .sticker.show { display: block; }
        .student-name { font-size: 2.5rem; color: #2E7D32; margin-top: 20px; text-shadow: 2px 2px #FFF; }
        
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .st1  { transform: translate(0, -165px); }
        .st2  { transform: translate(100px, -135px); }
        .st3  { transform: translate(160px, -55px); }
        .st4  { transform: translate(160px, 55px); }
        .st5  { transform: translate(100px, 135px); }
        .st6  { transform: translate(0, 165px); }
        .st7  { transform: translate(-100px, 135px); }
        .st8  { transform: translate(-160px, 55px); }
        .st9  { transform: translate(-160px, -55px); }
        .st10 { transform: translate(-100px, -135px); }

        footer { margin-top: 60px; padding: 25px; background: #E64A19; color: white; position: relative; z-index: 1; }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="https://raw.githubusercontent.com/eycfde-prog/superstars-page/main/assets/PAMD/WVM.wav" type="audio/wav">
    </audio>

    <div class="balloon-container"></div>

    <header>
        <img src="https://raw.githubusercontent.com/eycfde-prog/superstars-page/main/assets/PAMD/Logo.png" alt="Logo" class="logo">
        <h1>Pioneers Academy</h1>
        <h2>Miss Dina Online Classes</h2>
        <h3>Heroes Of Level 1</h3>
    </header>

    <div id="heroesList"></div>

    <footer>
        All Rights Reserved © 2026 - Pioneers Academy | Essra Youssry
    </footer>

    <script>
        const DEPLOY_URL = "https://script.google.com/macros/s/AKfycbzyy8JlQFHPDRGY3gP4XI2VAQjq14qcgqZsI61QMJ_kUDky3lRSpt7QnB8CT28Vlh9A/exec";

        function formatDriveUrl(url) {
            if (url && url.includes('drive.google.com')) {
                const fileId = url.match(/[-\w]{25,}/);
                if (fileId) return `https://lh3.googleusercontent.com/d/${fileId[0]}`;
            }
            return url;
        }

        async function loadData() {
            try {
                const response = await fetch(DEPLOY_URL);
                const students = await response.json();
                const heroesList = document.getElementById('heroesList');
                heroesList.innerHTML = ''; // مسح كلمة Loading

                students.forEach(student => {
                    // إنشاء حاوية الطالب (Card)
                    const card = document.createElement('div');
                    card.className = 'student-card';

                    // إنشاء الـ Hero Container
                    let stickersHtml = '';
                    for (let i = 1; i <= 10; i++) {
                        const isShow = i <= student.rank ? 'show' : '';
                        stickersHtml += `<img src="https://raw.githubusercontent.com/eycfde-prog/superstars-page/main/assets/PAMD/ST${i}.png" class="sticker st${i} ${isShow}" alt="sticker">`;
                    }

                    card.innerHTML = `
                        <div class="hero-container">
                            <div class="outer-frame"></div>
                            ${stickersHtml}
                            <img src="${formatDriveUrl(student.imageUrl)}" alt="${student.name}" class="student-img">
                        </div>
                        <h2 class="student-name">${student.name}</h2>
                    `;

                    heroesList.appendChild(card);
                });
            } catch (e) {
                console.error("Error:", e);
                document.getElementById('heroesList').innerHTML = "<h2>Error Loading Heroes</h2>";
            }
        }

        window.onload = () => {
            loadData();
            startBalloons();
        };

        document.addEventListener('click', () => { document.getElementById('bgMusic').play(); }, { once: true });

        function startBalloons() {
            const balloonContainer = document.querySelector('.balloon-container');
            const colors = ['color1', 'color2', 'color3', 'color4'];
            function createBalloon() {
                const balloon = document.createElement('div');
                balloon.classList.add('balloon', colors[Math.floor(Math.random() * colors.length)]);
                balloon.style.left = Math.random() * 100 + 'vw';
                balloon.style.setProperty('--float-duration', (Math.random() * 10 + 10) + 's');
                balloon.style.animationDelay = (Math.random() * 5) + 's'; 
                balloonContainer.appendChild(balloon);
                balloon.addEventListener('animationend', () => { balloon.remove(); });
            }
            for (let i = 0; i < 20; i++) { setTimeout(createBalloon, i * 500); }
            setInterval(createBalloon, 2000);
        }
    </script>
</body>
</html>
