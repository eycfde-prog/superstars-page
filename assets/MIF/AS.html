<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Alike Mission Module</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffcc00; --glass: rgba(255, 255, 255, 0.03); }
        body { 
            font-family: 'Cairo', sans-serif; background: transparent; color: white; 
            margin: 0; padding: 15px; overflow-x: hidden;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ù… - Ø§Ù„Ø¹Ø±Ø¶ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ø§ ÙŠØ·Ù„Ø¨Ù‡ Ø§Ù„Ù‡Ø§ÙŠØ¨ÙŠØ±Ø¯ */
        .mission-container { display: none; animation: fadeIn 0.5s ease; }
        .mission-container.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .alike-grid {
            display: grid; grid-template-columns: 1fr; gap: 15px; width: 100%;
        }

        .pair-card {
            background: var(--glass); backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 15px;
            padding: 15px; position: relative;
        }

        .case-tag {
            position: absolute; top: -10px; right: 15px; background: var(--gold);
            color: black; font-family: 'Orbitron'; font-size: 10px; 
            padding: 2px 10px; border-radius: 10px; font-weight: bold;
        }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        
        .word-box { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        
        label { font-size: 14px; color: #ddd; font-weight: bold; }

        input {
            width: 100%; background: rgba(0,0,0,0.5); border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px; padding: 10px; color: var(--gold); text-align: center;
            font-family: 'Orbitron'; font-size: 16px; outline: none; transition: 0.3s;
        }

        input:focus { border-color: var(--gold); box-shadow: 0 0 10px rgba(212, 175, 55, 0.2); }

        .submit-trigger {
            margin-top: 30px; text-align: center;
        }

        .internal-btn {
            background: linear-gradient(135deg, #bf953f, #fcf6ba);
            color: black; border: none; padding: 12px 40px; border-radius: 50px;
            font-weight: bold; cursor: pointer; font-family: 'Cairo';
        }
    </style>
</head>
<body>

    <div id="mission-wrapper">
        </div>

    <div class="submit-trigger">
        <button class="internal-btn" onclick="collectAndSend()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„Ù…Ù‡Ù…Ø© ğŸš€</button>
    </div>

<script>
    // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ 10 Ù…Ù‡Ø§Ù… (ÙƒÙ„ Ù…Ù‡Ù…Ø© 5 Ø£Ø²ÙˆØ§Ø¬ Homophones)
    const missionsData = {
        "1": [ {a:"Ø´Ù…Ø³", b:"Ø§Ø¨Ù†"}, {a:"Ø¨Ø­Ø±", b:"ÙŠØ±Ù‰"}, {a:"Ø¥Ù„Ù‰", b:"Ø£ÙŠØ¶Ø§Ù‹"}, {a:"Ù‡Ù†Ø§", b:"ÙŠØ³Ù…Ø¹"}, {a:"Ù„Ø§", b:"ÙŠØ¹Ø±Ù"} ], // Sun/Son, Sea/See, To/Too, Here/Hear, No/Know
        "2": [ {a:"Ø£Ø³Ø¨ÙˆØ¹", b:"Ø¶Ø¹ÙŠÙ"}, {a:"Ø·Ø±ÙŠÙ‚", b:"ÙˆØ²Ù†"}, {a:"Ø³Ø§Ø¹Ø©", b:"Ù„Ù†Ø§"}, {a:"Ø§Ø´ØªØ±Ù‰", b:"Ø¨ÙˆØ§Ø³Ø·Ø©"}, {a:"Ù„Ø­Ù…", b:"ÙŠÙ‚Ø§Ø¨Ù„"} ], // Week/Weak, Road/Rode, Hour/Our, Buy/By, Meat/Meet
        "3": [ {a:"Ø¬Ø¯ÙŠØ¯", b:"Ø¹Ø±Ù"}, {a:"Ø­Ù‚", b:"ÙŠÙƒØªØ¨"}, {a:"Ø«Ù…Ø§Ù†ÙŠØ©", b:"Ø£ÙƒÙ„"}, {a:"ÙƒØ§Ù…Ù„", b:"Ø«Ù‚Ø¨"}, {a:"ØµÙ„Ø§Ø©", b:"ÙØ±ÙŠØ³Ø©"} ], // New/Knew, Right/Write, Eight/Ate, Whole/Hole, Pray/Prey
        "4": [ {a:"Ù‚Ø·Ø¹Ø©", b:"Ø³Ù„Ø§Ù…"}, {a:"Ø§Ø¨Ù† Ø£Ø®", b:"Ø±ÙƒØ¨Ø©"}, {a:"Ø¯Ù‚ÙŠÙ‚", b:"ÙˆØ±Ø¯Ø©"}, {a:"Ù‚ØµØ©", b:"Ø·Ø§Ø¨Ù‚"}, {a:"Ø´Ø¹Ø±", b:"Ø£Ø±Ù†Ø¨"} ], // Piece/Peace, Nephew(??)/Knee, Flour/Flower, Tale/Tail, Hair/Hare
        // ... Ù…Ø³ØªØ± Ø¹Ø² ØªÙ‚Ø¯Ø± ØªÙƒÙ…Ù„ Ø§Ù„Ù€ 10 Ù…Ù‡Ø§Ù… Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø· Ø¯Ù‡
    };

    function renderActiveMission() {
        const urlParams = new URLSearchParams(window.location.search);
        const taskNum = urlParams.get('task') || "1";
        const pairs = missionsData[taskNum] || missionsData["1"];
        
        const wrapper = document.getElementById('mission-wrapper');
        wrapper.innerHTML = `
            <div class="mission-container active">
                <div class="alike-grid">
                    ${pairs.map((p, i) => `
                        <div class="pair-card">
                            <span class="case-tag">CASE 0${i+1}</span>
                            <div class="input-row">
                                <div class="word-box">
                                    <label>${p.a}</label>
                                    <input type="text" class="alike-input" data-pair="${i}" data-word="a" placeholder="English...">
                                </div>
                                <div class="word-box">
                                    <label>${p.b}</label>
                                    <input type="text" class="alike-input" data-pair="${i}" data-word="b" placeholder="English...">
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function collectAndSend() {
        const inputs = document.querySelectorAll('.alike-input');
        let answers = [];
        let missing = false;

        inputs.forEach(input => {
            if(!input.value.trim()) {
                missing = true;
                input.style.borderColor = "red";
            } else {
                input.style.borderColor = "rgba(212, 175, 55, 0.3)";
                answers.push(input.value.trim().toLowerCase());
            }
        });

        if(missing) {
            alert("ÙŠØ§ Ø¨Ø·Ù„ØŒ ÙƒÙ…Ù„ ÙƒÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø£ÙˆÙ„! ğŸ§");
            return;
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØµÙØ­Ø© Hybird Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        window.parent.postMessage({
            type: 'SUBMIT_MISSION',
            activityCode: 'AL',
            taskNum: new URLSearchParams(window.location.search).get('task'),
            data: answers
        }, '*');
    }

    window.onload = renderActiveMission;
</script>
</body>
</html>
