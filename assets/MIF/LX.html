<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Label X | Grammar Radar | EYC</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-purple: #bc13fe;
            --bg-dark: rgba(8, 8, 12, 0.95);
        }

        body { 
            font-family: 'Rajdhani', sans-serif; 
            background: transparent; 
            color: #fff; 
            margin: 0; 
            padding: 15px; 
            direction: ltr;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--neon-purple); border-radius: 10px; }

        .header-x {
            text-align: center; 
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(188, 19, 254, 0.2);
            background: linear-gradient(to right, transparent, rgba(188, 19, 254, 0.1), transparent);
        }

        .header-x h1 {
            font-family: 'Orbitron'; 
            font-size: 1.3rem;
            color: var(--neon-purple); 
            letter-spacing: 4px; 
            margin: 0 0 5px 0;
            text-shadow: 0 0 15px rgba(188, 19, 254, 0.5);
        }

        .header-x p {
            font-size: 0.8rem; 
            color: #aaa; 
            margin: 0;
            letter-spacing: 1px;
        }

        .label-x-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 15px;
        }

        .grammar-card {
            background: var(--bg-dark);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-left: 3px solid var(--neon-purple);
            border-radius: 10px;
            padding: 15px 20px;
            position: relative;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .grammar-card:hover {
            box-shadow: 0 0 25px rgba(188, 19, 254, 0.15);
            border-color: rgba(188, 19, 254, 0.4);
            transform: translateY(-3px);
            background: rgba(188, 19, 254, 0.03);
        }

        .case-id {
            position: absolute; 
            top: 8px; 
            right: 12px;
            font-family: 'Orbitron'; 
            font-size: 9px; 
            color: #444;
            letter-spacing: 1px;
        }

        .grammar-formula {
            font-family: 'Orbitron';
            font-size: 0.8rem;
            color: var(--neon-blue);
            margin-bottom: 15px;
            line-height: 1.4;
            min-height: 35px;
            display: flex; 
            align-items: center;
            text-shadow: 0 0 5px rgba(0, 242, 255, 0.3);
        }

        .x-input {
            width: 100%;
            background: rgba(0,0,0,0.6);
            border: 1px solid #222;
            border-radius: 6px;
            color: #fff;
            padding: 12px;
            font-family: 'Rajdhani';
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
            box-sizing: border-box;
            border-bottom: 2px solid #333;
        }

        .x-input:focus {
            border-color: var(--neon-purple);
            background: rgba(188, 19, 254, 0.05);
            border-bottom-color: var(--neon-purple);
            box-shadow: 0 5px 15px rgba(188, 19, 254, 0.1);
        }

        .x-input::placeholder {
            color: #444;
            font-size: 0.9rem;
        }

        /* Animation for Grid loading */
        .grammar-card {
            animation: radarPulse 0.6s ease-out forwards;
            opacity: 0;
        }

        @keyframes radarPulse {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="header-x">
        <h1 id="level-display">GRAMMAR RADAR: LEVEL 01</h1>
        <p>IDENTIFY THE TARGET STRUCTURE AND PROVIDE A VALID EXAMPLE</p>
    </div>

    <div id="radar-screen" class="label-x-grid"></div>

<script>
    const labelXData = {
        "1": ["Present Simple (Positive)", "Present Simple (Negative)", "Present Simple (Question)", "Past Simple (Positive)", "Past Simple (Negative)", "Past Simple (Question)", "Subject Pronouns", "Object Pronouns", "Possessive Adjectives", "Possessive Pronouns"],
        "2": ["Present Continuous (Positive)", "Present Continuous (Negative)", "Present Continuous (Question)", "Past Continuous (Positive)", "Past Continuous (Negative)", "Past Continuous (Question)", "Present Simple vs Continuous", "Stative Verbs (Usage)", "Spelling rules for -ing", "Time markers for Continuous"],
        "3": ["Future Simple (Will - Positive)", "Future Simple (Will - Negative)", "Future Simple (Will - Question)", "Future (Going to - Positive)", "Future (Going to - Question)", "Can / Can't (Ability)", "Must / Mustn't (Obligation)", "Should / Shouldn't (Advice)", "Have to (Positive)", "Don't have to (Lack of necessity)"],
        "4": ["Present Perfect Simple (Positive)", "Present Perfect Simple (Negative)", "Present Perfect Simple (Question)", "Ever / Never (Usage)", "Just / Already / Yet", "Since vs For", "Present Perfect vs Past Simple", "Been vs Gone", "Have you ever...?", "Past Perfect (Positive)"],
        "5": ["Present Simple (Passive Positive)", "Present Simple (Passive Negative)", "Present Simple (Passive Question)", "Past Simple (Passive Positive)", "Past Simple (Passive Negative)", "Past Simple (Passive Question)", "By + Agent in Passive", "Passive with two objects", "Passive (It is said that...)", "Active to Passive Conversion"],
        "6": ["Present Perfect Continuous (Positive)", "Present Perfect Continuous (Question)", "Past Perfect Continuous (Positive)", "Past Perfect Continuous (Negative)", "Future Continuous (Positive)", "Future Perfect (Positive)", "State vs Action Verbs in Continuous", "Emphasis on duration (For/Since)", "Mixed Continuous Tenses", "Narrative Tenses"],
        "7": ["Present Continuous (Passive)", "Past Continuous (Passive)", "Present Perfect Simple (Passive Positive)", "Present Perfect Simple (Passive Negative)", "Past Perfect Simple (Passive)", "Future Simple (Passive)", "Going to (Passive)", "Modals in Passive (Can be + P.P)", "Passive Voice (Question Forms)", "Passive with Verbs like 'Believe/Think'"],
        "8": ["May / Might (Possibility)", "Could / Should (Perfect Modals)", "Must have + P.P (Certainty)", "Can't have + P.P (Impossibility)", "Should have + P.P (Regret)", "Needn't vs Don't have to", "Passive Modals (Question)", "Passive with Gerunds", "Passive with Infinitives", "Reporting Passive"],
        "9": ["Zero Conditional (If/When)", "First Conditional (Real Possibility)", "Second Conditional (Hypothetical)", "Third Conditional (Regret in Past)", "Unless in Conditionals", "Provided that / As long as", "Mixed Conditionals (Type 2 + 3)", "Mixed Conditionals (Type 3 + 2)", "I wish / If only (Present)", "I wish / If only (Past)"],
        "10": ["Future Perfect Passive", "Modals in Passive (Negative Question)", "Passive with Causative (Have/Get something done)", "Advanced Relative Clauses", "Inversion with Negative Adverbs", "Subjunctive Mood (I suggest that...)", "Gerund vs Infinitive (Passive)", "Future in the Past", "Participle Clauses", "Complex Passive (Modals + Perfect)"]
    };

    const urlParams = new URLSearchParams(window.location.search);
    const taskNum = urlParams.get('task') || "1";

    function loadRadar() {
        const cases = labelXData[taskNum] || labelXData["1"];
        document.getElementById('level-display').innerText = `GRAMMAR RADAR: LEVEL ${taskNum.padStart(2, '0')}`;
        
        const screen = document.getElementById('radar-screen');
        screen.innerHTML = cases.map((c, i) => `
            <div class="grammar-card" style="animation-delay: ${i * 0.05}s">
                <span class="case-id">ID: LX-${taskNum}.${i+1}</span>
                <div class="grammar-formula">${c}</div>
                <input type="text" class="x-input" id="case-${i}" placeholder="Enter your sentence here..." autocomplete="off">
            </div>
        `).join('');
    }

    // Communication logic
    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_LABELX_DATA') {
            sendData();
        }
    });

    function sendData() {
        const answers = [];
        for(let i=0; i<10; i++) {
            answers.push(document.getElementById(`case-${i}`).value.trim());
        }

        window.parent.postMessage({ 
            type: 'SUBMIT_X', 
            activityCode: 'LX',
            answers: answers, 
            missionNum: taskNum 
        }, '*');
    }

    window.onload = loadRadar;
</script>
</body>
</html>